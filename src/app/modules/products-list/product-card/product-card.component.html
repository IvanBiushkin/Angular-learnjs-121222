<mat-card class="card">
	<mat-card-header>
		<mat-card-title>{{ product.name }}</mat-card-title>
		<mat-card-subtitle>{{ product.price }} $</mat-card-subtitle>
	</mat-card-header>
	<div
		*appCarousel="
			product.images as images;
			visibility: true as visibilityFromContext;
			let moveNext = next;
			let moveBack = back;
			let currentImage
		"
		class="galerey"
	>
		<!-- <ng-template
			let-currentImage
			let-next="next"
			let-back="back"
			[appCarousel]="product.images"
		> -->
		<!-- {{images.length}} -->
		<!-- {{visibilityFromContext}} -->
		<button mat-icon-button (click)="moveBack()">
			<mat-icon> chevron_left </mat-icon>
		</button>
		<img mat-card-image alt="Product" [src]="currentImage.url" />
		<button mat-icon-button (click)="moveNext()">
			<mat-icon> chevron_right </mat-icon>
		</button>
		<!-- </ng-template> -->
	</div>
	<mat-card-content>
		<p>Отзывы: {{ product.feedbacksCount }}</p>
		<div class="raiting">
			Рейтинг:
			<mat-icon [class.star-active]="isStarActive(1)"> star </mat-icon>
			<mat-icon [class.star-active]="isStarActive(2)"> star </mat-icon>
			<mat-icon [class.star-active]="isStarActive(3)"> star </mat-icon>
			<mat-icon [class.star-active]="isStarActive(4)"> star </mat-icon>
			<mat-icon [class.star-active]="isStarActive(5)"> star </mat-icon>
		</div>
	</mat-card-content>
	<mat-card-actions class="mat-card-actions-align-end">
		<button mat-button appInsertShadow (click)="onProductBuy($event)">
			Buy
		</button>
	</mat-card-actions>
</mat-card>
